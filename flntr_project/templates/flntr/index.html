{% extends 'flntr/base.html' %}
{% load staticfiles %}

{% block title_block %}

{% endblock %}

{% block body_block %}

<style>
.flat-view {
	box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
   	transition: 0.3s;
    margin: 20px 20px 0 0;
    border-radius: 5px;
    overflow: auto
}

.flat-view:hover {
    box-shadow: 0 8px 16px 0 rgba(0,0,0,0.4);
}

.flat-image {
    float: left;
}
.flat-image img {
    display: block
}
.flat-description {
    margin-left: 210px
}
.post-title {
    font-weight: bold;
    padding: 10px;
    background: #ccc
}

</style>

<h2>Homepage</h2>
	<div>
		<h2>Most Recent Flats</h2>
		{% if recentflats %}
			<ul>
			{% for flat in recentflats %}

			<div class="flat-view" style="cursor: pointer;" onclick="window.location='{% url 'show_property' flat.slug %}';">
    			<h4 class="post-title">{{flat.title}}</h4>
    			<div class="flat-image">
					<img width="200" height="200" src="{% for flatimage in recent_flat_images %} {% if flatimage.flat == flat %} {{ MEDIA_URL }}{{ flatimage.image.url }} {% endif %} {% endfor %}" alt="idk"/>
				</div>
    			<div class="flat-description">
        			<p>{{flat.description}}</p>
					<ul>
						<li>Location: {{ flat.streetAddress }}</li>
						<li>Average Price per Room: £{{ flat.averageRoomPrice }}</li>
						<li>Date added: {{ flat.dayAdded }}</li>
					</ul>
				</div>
			</div>

				<!-- <li><a href="{% url 'show_property' flat.slug %}">{{ flat.title }}</a></li>
				<ul>
					<li>Location: {{ flat.streetAddress }}</li>
					<li>Average Price per Room: {{ flat.averageRoomPrice }}</li>
					<li>Date added: {{ flat.dayAdded }}</li>
				</ul> -->
			{% endfor %}
			</ul>
		{% else %}
			There are no rooms
		{% endif %}
	</div>

	<div>
		<h2>Most Viewed Flats</h2>
		{% if mostviewed %}
			<ul>
			{% for flat in mostviewed %}
			<div class="flat-view" style="cursor: pointer;" onclick="window.location='{% url 'show_property' flat.slug %}';">
    			<h4 class="post-title">{{flat.title}}</h4>
    			<div class="flat-image">
					<img width="200" height="200" src="{% for flatimage in viewed_flat_images %} {% if flatimage.flat == flat %} {{ MEDIA_URL }}{{ flatimage.image.url }} {% endif %} {% endfor %}" alt="idk"/>
				</div>
    			<div class="flat-description">
        			<p>{{flat.description}}</p>
					<ul>
						<li>Location: {{ flat.streetAddress }}</li>
						<li>Average Price per Room: £{{ flat.averageRoomPrice }}</li>
						<li>Date added: {{ flat.dayAdded }}</li>
					</ul>
				</div>
			</div>
			{% endfor %}
			</ul>
		{% else %}
			There are no rooms
		{% endif %}
	</div>

	<div>
		<ul>
			<li><a href="{% url 'property' %}">View all flats</a></li>
		</ul>
	</div>
{% endblock %}
